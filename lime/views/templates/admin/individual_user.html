{% extends "base.html" %}
{% block content %}
<a href="/admin/user/">&lt;- Back to user list</a>
<div style="padding-left:300px; padding-top:20px; padding-bottom:40px;">
<h2>User: {{user.email}}</h2>
  {% if error %}<p class=error><strong>Error:</strong> {{ error }}{% endif %}
    <h3>Information</h3>
    <ul>
        <li>Email: {{user.email}}</li>
        <li>Username: {{user.username}}</li>
        <li>User ID: {{user.id}}</li>
        <li>Stripe ID: {{user.stripe_id}}</li>
        <li>Confirmed: {{user.confirmed}}</li>
    </ul>

    <h3>Host</h3>
    <ul>
        <li>Hostname: {{host.hostname}}</li>
        <li>Bucketname: {{host.bucketname}}</li>
        <li>Template name: {{host.template}}
        <li>Title: {{host.title}}</li>
        <li>Subtitle: {{host.subtitle}}</li>
    </ul>

<h2>Plans</h2>
<h3>Enrolled</h3>
{% if cust.subscriptions.total_count < 1 %}
    No plans.<br/>
{% else %}
    <ul>
    {% for sub in cust.subscriptions.data %}
        <li>{{ sub.plan.name }} ({{ "$%.2f"|format(sub.plan.amount/100) }} per {{ sub.plan.interval }}) - <a href="./plan/{{plan.id}}/remove">Remove</a></li>
    {% endfor %}
    </ul>
{% endif %}
<h3>Available</h3>
    <ul>
    {% for plan in plans.data %}
        <li>{{ plan.name }} ({{ "$%.2f"|format(plan.amount/100) }} per {{ plan.interval }}) - <a href="./plan/{{plan.id}}/add">Add</a></li>
    {% endfor %}
    </ul>

<h2>Cards</h2>
{% if cust.cards.total_count < 1 %}
    No cards added.
{% else %}
    <ul>
    {% for card in cust.cards.all()["data"] %}
        <li>{{ card.brand }} ending in {{ card.last4}} expiring on {{ card.exp_month }}/{{ card.exp_year }}</li>
    {% endfor %}
    </ul>
{% endif %}



<h2>Actions</h2>
    <ul>
        <li><a href="./{{user.id}}/delete/">Delete user</a></li>
        <li><a href="./{{user.id}}/login/">Login as user</a></li>
    </ul>
  </ul>
</div>
{% endblock %}
