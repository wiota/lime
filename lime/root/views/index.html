{% extends "base.html" %}


{% block backbone_templates %}

  <!-- Menus and Nav - - - - - - - - - - - - - - - - - - - - -->

  <!-- Main Nav -->
  <script type="text/template" id="lime_nav">
    <ul class='lime_nav nav'>
      <li class='home'>
        <a href="{{ url_for('root.index') }}#">
          <b class='icon bookcase'></b>
          <b class='label'>home</b>
        </a>
      </li>
      <li class='back'>
        <a class='' onclick='javascript: history.go(-1)'>
          <b class='icon back'>
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16"><circle fill="#0083c6" cx="8" cy="8" r="8"/><path fill="#ffffff" d="M8,1.018V6l6.697-0.003c0.191,0.637,0.294,1.312,0.294,2.012c0,0.691-0.101,1.36-0.288,1.991H8v5L1,8 L8,1.018z"/></svg>
            </b>
          <b class='label'>back</b>
        </a>
      </li>
    </ul>
  </script>

  <script type="text/template" id="account_nav">
    <ul class='account_nav nav'>
      <li class='identification'>
        <a class='drop'><b class='label'>{{current_user.email}}</b></a>
        <ul class='subnav'>
          <li class='account'>
            <a href='{{ url_for('account.account') }}'>
              <b class='icon face'>
                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16"><circle fill="#FFFFFF" stroke="#000000" stroke-miterlimit="10" cx="8" cy="8" r="7.3"/><circle cx="6.5" cy="7.5" r="0.75"/><circle cx="9.5" cy="7.5" r="0.75"/><path fill="none" stroke="#000000" stroke-miterlimit="10" d="M5.5,10.5c0.516,0.625,1.438,1.062,2.5,1.062h0.001H8 c1.062,0,1.984-0.438,2.5-1.062"/></svg>
                </b>
              <b class='label'>account settings</b>
            </a>
          </li>
          {% if current_user.admin %}
          <li class='admin'>
            <a href=" {{ url_for('admin.index') }} ">
              <b class='eye icon'>
                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16"><circle fill="#FFFFFF" stroke="#000000" stroke-miterlimit="10" cx="8" cy="8" r="7.3"/><circle cx="6.499" cy="10.5" r="2"/></svg>
                </b>
              <b class='label'>admin</b>
            </a>
          </li>
          {% endif %}
          <li class='god'>
            <a>
              <b class='icon god'>
                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16"><polyline fill="none" stroke="#000000" points="0.5,1 0.5,15.5 15.5,15.5 15.5,1.5 2.5,1.5 2.5,13.5 13.5,13.5 13.5,3.5 4.5,3.5 4.5,11.5 11.5,11.5 11.5,5.5 6.5,5.5 6.5,9.5 9.5,9.5 9.5,7.5 8,7.5 "/><polyline fill="none" stroke="#fffff" points="1.5,1 1.5,14.5 14.5,14.5 14.5,2.5 3.5,2.5 3.5,12.5 12.5,12.5 12.5,4.5 5.5,4.5 5.5,10.5 10.5,10.5 10.5,6.5 7.5,6.5 7.5,8.5 9,8.5 "/></svg>
              </b>
              <b class='label'>API endpoint</b>
            </a>
          </li>
          <li class='logout'>
            <a href="{{ url_for('root.logout') }} ">
              <b class='icon'>
                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16"><line fill="none" stroke="#000000" stroke-miterlimit="10" x1="1" y1="1.5" x2="15" y2="1.5"/><line fill="none" stroke="#000000" stroke-miterlimit="10" x1="1" y1="13.5" x2="15" y2="13.5"/><line fill="none" stroke="#000000" stroke-miterlimit="10" x1="0.5" y1="2" x2="0.5" y2="13"/><line fill="none" stroke="#000000" stroke-miterlimit="10" x1="15.5" y1="2" x2="15.5" y2="13"/><line fill="none" stroke="#D80404" stroke-miterlimit="10" x1="2.5" y1="3" x2="2.5" y2="12"/><line fill="none" stroke="#D80404" stroke-miterlimit="10" x1="2" y1="3.5" x2="4" y2="3.5"/><line fill="none" stroke="#D80404" stroke-miterlimit="10" x1="2" y1="7.5" x2="4" y2="7.5"/><line fill="none" stroke="#D80404" stroke-miterlimit="10" x1="2" y1="11.5" x2="4" y2="11.5"/><polygon fill="#D80404" points="8,12 7,12 5,3 6,3 "/><polygon fill="#D80404" points="5,12 6,12 8,3 7,3 "/><line fill="none" stroke="#D80404" stroke-miterlimit="10" x1="9.5" y1="3" x2="9.5" y2="12"/><line fill="none" stroke="#D80404" stroke-miterlimit="10" x1="11" y1="3.5" x2="14" y2="3.5"/><line fill="none" stroke="#D80404" stroke-miterlimit="10" x1="12.5" y1="3.5" x2="12.5" y2="12"/></svg>
                </b>
              <b class='label'>Logout</b>
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </script>

  <!-- Add Menu -->
  <script type="text/template" id="vertex_add">
    <a class='add_<%- vertex_type %>'><img src='/icon/<%- vertex_type %>.svg'>add <%- vertex_label %></a>
  </script>

  <!-- View Menus -->
  <script type="text/template" id="menu_item">
    <li><a class='<%- className %>'><b class='icon <%- className %>'><img src='/icon/<%- className %>.svg'></b><b class='label'><%- label %></b></a></li>
  </script>

  <script type="text/template" id="menu_switch">
    <a class='switch'><b class='icon'></b><b class='label'><%- label %></b></a>
  </script>



  <!-- Vertices and Sets - - - - - - - - - - - - - - - - - - - -  -->

  <!-- Empty Set -->
  <script type="text/template" id="empty_succset">
    <div class='empty_succset'>
      <h2>Nothing here yet.</h2>
      <p><span class='drag'>drag media here</span> or use add menu above</p>
    </div>
  </script>

  <!-- Vertex - default vertex view, used for both in set and summary -->
  <script type="text/template" id="vertex_template">
    <div class='cover'></div>

    <div class='tertiary type attribute'></div>
    <div class='attributes'>
      <img class='icon <%- vertex_type %>' src='/icon/<%- vertex_type %>.svg'>
    </div>

    <div class='ui'>
      <a class='get' href='#<%- vertex_type %>/<%- _id %>'></a>
      <a class='set_cover'><img class='icon update' src='/icon/lens.svg'><b class='label'>set cover</b></a>
      <a class='update'><img class='icon update' src='/icon/pencil.svg'><b class='label'>update</b></a>
      <a class='delete'>cut</a>
      <a class='drag_handle'>&#8597;</a>
    </div>
  </script>


  <!-- Form templates - - - - - - - - - - - - - - - - - - - - -->

  <script type="text/template" id="text">
    <label class='<%- name %>' for='<%- name %>'><%- label %></label><input tabindex='<%- tabindex %>' class='input' type='text' placeholder='...' id='<%- name %>' value='<%- value %>' />
  </script>

  <script type="text/template" id="textarea">
    <label class='<%- name %>' for='<%- name %>'><%- label %></label>
    <textarea tabindex='<%- tabindex %>' placeholder='...' class='input textarea' id='<%- name %>'><%- value %></textarea>
  </script>

  <script type="text/template" id="button">
    <input class='input button <%- cls %>' type='button' value='<%- label %>' />
  </script>

  <script type="text/template" id="file_upload">
    <div class='files_container'>
      <i class='message'>Drop files here</i>
      <input type="file" multiple="multiple" name="files[]" class="files"/>
    </div>
  </script>

  <script type="text/template" id="html5_file_upload">
    <input type="file" multiple="multiple" name="files[]" class="files"/>
    <div class='files_container'>
    </div>
  </script>

  <script type="text/template" id="cover_display">
    <div class='cover_display'></div>
  </script>

  <script type="text/template" id="god_attributes">
    <a class='head'>In vertex we trust <img class='icon god' src='/icon/god.svg'></a>
    <label class='checkbox' for='deletable'><input id="deletable" type="checkbox" name="deletable" value="true" <%- deletable %> /> Deletable</label>
    <label class='checkbox' for='pub'><input id="pub" type="checkbox" name="pub" value="true" <%- pub %> /> Public</label>
    <label class='layout' for='layout'>Layout</label><input class='input' type='text' id='layout' value='<%- layout %>' />
    <label class='slug' for='slug'>Slug</label><input disabled='true' class='input' type='text' id='slug' value='<%- slug %>' />

  </script>


  <!-- Upload templates  - - - - - - - - - - - - - - - - - - - -  -->

  <script type="text/template" id="awaiting">

    <div class='cover'></div>

    <div class='upload_container'>

    </div>

    <div class='attributes awaiting'>
      <img class='icon <%- vertex_type %>' src='/icon/<%- vertex_type %>.svg'>
    </div>

    <div class='ui'>
      <a class='set_cover'><img class='icon update' src='/icon/lens.svg'><b class='label'>set cover</b></a>
      <a class='update'><img class='icon update' src='/icon/pencil.svg'><b class='label'>update</b></a>
      <a class='drag_handle'>&#8597;</a>
    </div>
  </script>

  <script type="text/template" id="upload">
    <div style='width: 0%' class='upload_fill'></div>
    <!--<a class='cancel'>X</a>-->
    <!--<i class='label'></i>-->
  </script>

  <!-- Custom templates  - - - - - - - - - - - - - - - - - - - -  -->

  <!-- Host  -->
  <script type="text/template" id="host_in_set">
    <div class='cover'></div>

    <div class='attributes'>
      <img class='icon host' src='/icon/home.svg'>
      <b class='attribute primary'><%- title %></b>
    </div>

    <div class='ui'>
      <a class='get' href='#'></a>
      <a class='set_cover'><img class='icon update' src='/icon/lens.svg'><b class='label'>set cover</b></a>
      <a class='update'><img class='icon update' src='/icon/pencil.svg'><b class='label'>update</b></a>
      <a class='drag_handle'>&#8597;</a>
    </div>
  </script>

  <!-- Body  -->
  <script type="text/template" id="body_in_set">
    <div class='cover'></div>

    <div class='attributes'>
      <img class='icon body' src='/icon/body.svg'>
      <b class='attribute primary'>Body of Work</b>
    </div>

    <div class='ui'>
      <a class='get' href='#body/<%- _id %>'></a>
      <a class='set_cover'><img class='icon update' src='/icon/lens.svg'><b class='label'>set cover</b></a>
      <a class='update'><img class='icon update' src='/icon/pencil.svg'><b class='label'>update</b></a>
      <a class='delete'>cut</a>
      <a class='drag_handle'>&#8597;</a>
    </div>
  </script>

    <!-- Happenings  -->
  <script type="text/template" id="calendar_in_set">
    <div class='cover'></div>

    <div class='attributes'>
      <img class='icon calendar' src='/icon/calendar.svg'>
      <b class='attribute primary'>Happenings</b>
    </div>

    <div class='ui'>
      <a class='get' href='#calendar/<%- _id %>'></a>
      <a class='set_cover'><img class='icon update' src='/icon/lens.svg'><b class='label'>set cover</b></a>
      <a class='update'><img class='icon update' src='/icon/pencil.svg'><b class='label'>update</b></a>
      <a class='delete'>cut</a>
      <a class='drag_handle'>&#8597;</a>
    </div>
  </script>

  <!-- Photo  -->
  <script type="text/template" id="photo_in_set">

    <!-- no cover -->

    <div class='attributes'>
      <img src="<%- href %>?w=200" alt="" />
      <!--<b class='attribute primary'><%- href %></b>-->
    </div>

    <div class='ui'>
      <a class='get' target='_blank' href='<%- href %>'></a>
      <a class='delete'>cut</a>
      <a class='drag_handle'>&#8597;</a>
    </div>
  </script>

  <!-- Audio  -->
  <script type="text/template" id="audio_in_set">

    <!-- no cover -->

    <div class='attributes'>
      <img class='icon audio' src='/icon/audio.svg'>
      <b class='attribute primary'><%- title %></b>
      <audio src="<%- href %>" controls >
        <p>Your browser does not support the <code>audio</code> element </p>
        <a href="<%- href %>"><%- title %></a>
      </audio>


    </div>

    <div class='ui'>
      <a class='delete'>cut</a>
      <a class='drag_handle'>&#8597;</a>
    </div>
  </script>

  <!-- Youtube  -->
  <script type="text/template" id="youtube_in_set">

    <div class='cover'>
      <img src='https://img.youtube.com/vi/<%- vid %>/1.jpg'>
      <img src='https://img.youtube.com/vi/<%- vid %>/2.jpg'>
      <img src='https://img.youtube.com/vi/<%- vid %>/3.jpg'>
    </div>

    <div class='attributes'>
      <img class='icon tree' src='/icon/youtube.svg'>
      <b class='attribute primary'>#<%- vid %></b>
    </div>

    <div class='ui'>
      <a class='get' target='_blank' href='https://www.youtube.com/watch?v=<%- vid %>'></a>
      <a class='delete'>cut</a>
      <a class='drag_handle'>&#8597;</a>
    </div>
  </script>

   <!-- Vimeo  -->
  <script type="text/template" id="vimeo_in_set">

    <!-- Need vimeo thumbnail from api
    <div class='cover'>
      <img src=''>
    </div>
    -->

    <div class='attributes'>
      <img class='icon tree' src='/icon/vimeo.svg'>
      <b class='attribute primary'>#<%- vid %></b>
    </div>

    <div class='ui'>
      <a class='get' target='_blank' href='https://vimeo.com/<%- vid %>'></a>
      <a class='delete'>cut</a>
      <a class='drag_handle'>&#8597;</a>
    </div>
  </script>


{% endblock %}

{% block content %}
<div id='primary_subject' class='subject'>
  <div class='predecessor lens'>
    <div class='predecessor box'></div>
  </div>

  <div class='focus lens'>
    <div class='focus box'></div>
  </div>

  <div class='successor lens'>
    <div class='successor box'></div>
  </div>
</div>

<div id='secondary_subject' class='subject'>
  <div class='successor lens'>
    <div class='successor box'></div>
  </div>
</div>

{% endblock %}

{% block js_footer %}

  <script type="text/javascript" src='{{ url_for('static', filename='js/s3upload.js')|bust }}'></script>
  <script type="text/javascript" src='{{ url_for('static', filename='js/async.js')|bust }}'></script>
  <script type="text/javascript" src='{{ url_for('static', filename='js/lime.router.js')|bust }}'></script>
  <script type="text/javascript" src='{{ url_for('static', filename='js/lime.model.js')|bust }}'></script>
  <script type="text/javascript" src='{{ url_for('static', filename='js/lime.collection.js')|bust }}'></script>
  <script type="text/javascript" src='{{ url_for('static', filename='js/lime.view.js')|bust }}'></script>
  <script type="text/javascript" src='{{ url_for('static', filename='js/lime.nav.js')|bust }}'></script>
  <script type="text/javascript" src='{{ url_for('static', filename='js/lime.panel.js')|bust }}'></script>
  <script type="text/javascript" src='{{ url_for('static', filename='js/lime.focus.js')|bust }}'></script>
  <script type="text/javascript" src='{{ url_for('static', filename='js/lime.form.js')|bust }}'></script>
  <script type="text/javascript" src='{{ url_for('static', filename='js/lime.menu.js')|bust }}'></script>
  <script type="text/javascript" src='{{ url_for('static', filename='js/lime.stack.js')|bust }}'></script>


  <script type='text/javascript'>
    $(document).ready(function() {
      LIME.flash();
      LIME.start();
    });
  </script>

{% endblock %}
