{% extends "base.html" %}


{% block backbone_templates %}

  <!-- Menus and Nav - - - - - - - - - - - - - - - - - - - - -->

  <!-- Home Page Menu - Replace with host root vertex -->
  <script type="text/template" id="home_menu">
    <li class='body'>
      <a href='#body'><b class='icon bookcase'></b>body of work</a>
    </li>
    <li class='happening'>
      <a href='#happenings'>
      <b class='icon calendar'>
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16">
          <rect y="1" fill="#78F7D8" width="16" height="13"/>
          <rect x="1.5" y="4" fill="#FFFFFF" width="1" height="1"/>
          <rect x="3.5" y="4" fill="#FFFFFF" width="1" height="1"/>
          <rect x="5.5" y="4" fill="#FFFFFF" width="1" height="1"/>
          <rect x="7.5" y="4" fill="#FFFFFF" width="1" height="1"/>
          <rect x="9.5" y="4" fill="#FFFFFF" width="1" height="1"/>
          <rect x="11.5" y="4" fill="#FFFFFF" width="1" height="1"/>
          <rect x="13.5" y="4" fill="#FFFFFF" width="1" height="1"/>
          <rect x="1.5" y="6" fill="#FFFFFF" width="1" height="1"/>
          <rect x="3.5" y="6" fill="#FFFFFF" width="1" height="1"/>
          <rect x="5.5" y="6" fill="#FFFFFF" width="1" height="1"/>
          <rect x="7.5" y="6" fill="#FFFFFF" width="1" height="1"/>
          <rect x="9.5" y="6" fill="#FFFFFF" width="1" height="1"/>
          <rect x="11.5" y="6" fill="#FFFFFF" width="1" height="1"/>
          <rect x="13.5" y="6" fill="#FFFFFF" width="1" height="1"/>
          <rect x="1.5" y="8" fill="#FFFFFF" width="1" height="1"/>
          <rect x="3.5" y="8" fill="#FFFFFF" width="1" height="1"/>
          <rect x="5.5" y="8" fill="#FFFFFF" width="1" height="1"/>
          <rect x="7.5" y="8" fill="#FFFFFF" width="1" height="1"/>
          <rect x="9.5" y="8" fill="#FFFFFF" width="1" height="1"/>
          <rect x="11.5" y="8" fill="#FFFFFF" width="1" height="1"/>
          <rect x="13.5" y="8" fill="#FFFFFF" width="1" height="1"/>
          <rect x="1.5" y="10" fill="#FFFFFF" width="1" height="1"/>
          <rect x="3.5" y="10" fill="#FFFFFF" width="1" height="1"/>
          <rect x="5.5" y="10" fill="#FFFFFF" width="1" height="1"/>
          <rect x="1.5" y="12" fill="#FFFFFF" width="1" height="1"/>
          <rect x="3.5" y="12" fill="#FFFFFF" width="1" height="1"/>
          <rect x="13.5" y="2" fill="#FFFFFF" width="1" height="1"/>
          <rect x="7.5" y="10" fill="#FFFFFF" width="1" height="1"/>
          <rect x="9.5" y="10" fill="#FFFFFF" width="1" height="1"/>
          <rect x="11.5" y="10" fill="#FFFFFF" width="1" height="1"/>
          <rect x="13.5" y="10" fill="#FFFFFF" width="1" height="1"/>
        </svg>
      </b>happenings</a>
    </li>
  </script>

  <!-- Path Panel -->
  <script type="text/template" id="path_panel_template">
    <div class='path'></div>
  </script>

  <script type="text/template" id="path_vertex_template">
    <div class='vertex link'><a><%- title %></a></div>
  </script>

  <!-- Add Menu -->
  <script type="text/template" id="vertex_add">
  <a class='add_<%- vertex_type %>'><img src='/icon/<%- vertex_type %>.svg'>add <%- vertex_label %></a>
  </script>

  <!-- View Menus -->
  <script type="text/template" id="menu_item">
    <li><a class='<%- cls %>'><b class='icon <%- cls %>'><img src='/icon/<%- cls %>.svg'></b><b class='label'><%- label %></b></a></li>
  </script>

  <script type="text/template" id="menu_switch">
    <a class='switch <%- cls %>'><b class='icon <%- cls %>'><img src='/icon/<%- cls %>.svg'></b><b class='label'><%- label %></b></a>
  </script>



  <!-- Vertices and Sets - - - - - - - - - - - - - - - - - - - -  -->

  <!-- Empty Set -->
  <script type="text/template" id="empty_succset">
    <div class='empty_succset'>
      <h2>Nothing here yet.</h2>
      <p><span class='drag'>drag</span> images here to add works or <br />
      <span class='add'>add</span> other items</p>
    </div>
  </script>

  <!-- Vertex - default vertex view, used for both in set and summary -->
  <script type="text/template" id="vertex_template">
    <div class='cover'></div>

    <div class='attributes'>
      <img class='icon <%- vertex_type %>' src='/icon/<%- vertex_type %>.svg'>
    </div>

    <div class='ui'>
      <a class='get' href='#<%- vertex_type %>/<%- _id %>'></a>
      <a class='set_cover'><img class='icon update' src='/icon/lens.svg'><b class='label'>set cover</b></a>
      <a class='update'><img class='icon update' src='/icon/pencil.svg'><b class='label'>update</b></a>
      <a class='delete'>delete</a>
      <a class='drag_handle'>&#8597;</a>
    </div>
  </script>


  <!-- Form templates - - - - - - - - - - - - - - - - - - - - -->

  <script type="text/template" id="text">
    <label class='<%- name %>' for='<%- name %>'><%- label %></label><input class='input' type='text' id='<%- name %>' value='<%- value %>' />
  </script>

  <script type="text/template" id="textarea">
    <label class='<%- name %>' for='<%- name %>'><%- label %></label>
    <textarea class='input textarea' id='<%- name %>'><%- value %></textarea>
  </script>

  <script type="text/template" id="button">
    <input class='input button <%- cls %>' type='button' value='<%- label %>' />
  </script>

  <script type="text/template" id="file_upload">
    <div class='files_container'>
      <i class='message'>Drop files here</i>
      <input type="file" multiple="multiple" name="files[]" class="files"/>
    </div>
  </script>

  <script type="text/template" id="html5_file_upload">
    <input type="file" multiple="multiple" name="files[]" class="files"/>
    <div class='files_container'>
      <i class='message'><%- label %></i>
    </div>
  </script>

  <script type="text/template" id="cover_display">
    <div class='cover_display'></div>
  </script>

  <script type="text/template" id="god_attributes">
    <img class='icon god' src='/icon/god.svg'>
    <label for='deletable'><input id="deletable" type="checkbox" name="deletable" value="true" <%- deletable %> /> Deletable</label>
  </script>


  <!-- deprecated templates  - - - - - - - - - - - - - - - - - - - -  -->

  <!-- Summaries -->
  <script type="text/template" id="happenings_summary_deprecated">
    <div class='happenings_title title'>happenings</div>
    <div class='meta'>

    </div>
    <div class='add_menu'>
      <a class='add_happening'><img src='/icon/calendar.svg'>add happening</a>
      <a class='add_category'><img src='/icon/book.svg?c=d8bb00'>add category</a>
    </div>
  </script>

  <script type="text/template" id="body_summary_deprecated">
    <b class='icon bookcase'><img src='/icon/bookcase.svg'></b>
    <div class='body_title title'>body of work</div>
    <div class='meta'>

    </div>
    <div class='add_menu'><!-- typeSchema --></div>
  </script>

  <script type="text/template" id="category_summary_deprecated">
    <b class='icon book'><img src='/icon/book.svg?c=d8bb00'></b>
    <div class='category_title title'><%- title %></div>
    <div class='meta'>
      <a class='update'>update</a>
      <div class='cover set_cover'><a class='set_cover'>set cover</a></div>
    </div>
    <div class='add_menu'><!-- typeSchema --></div>
  </script>

  <script type="text/template" id="work_summary_deprecated">
    <b class='icon tree'><img src='/icon/tree.svg'></b>
    <div class='work_title title'><%- title %></div>
    <div class='meta'>
      <a class='update'>update</a>
      <a class='set_cover'>set cover</a>
      <div class='cover set_cover'></div>
    </div>
    <div class='add_menu'><!-- typeSchema --></div>
  </script>

  <script type="text/template" id="happening_summary_deprecated">
    <b class='icon calendar'><img src='/icon/calendar.svg'></b>
    <div class='title'><%- title %></div>
    <div class='meta'>
      <a class='update'>update</a>
      <a class='set_cover'>set cover</a>
      <div class='cover set_cover'></div>
    </div>
  </script>

  <script type="text/template" id="vertex_summary_deprecated">
    <b class='icon <%- vertex_type %>'><img src='/icon/<%- vertex_type %>.svg'></b>
    <div class='title'><%- title %></div>
    <div class='meta'>
      <a class='update'>update</a>
      <a class='set_cover'>set cover</a>
      <div class='cover set_cover'></div>
    </div>
    <div class='add_menu'><!-- typeSchema --></div>
  </script>

  <!-- SuccsetItem  -->

  <!-- Link  -->
  <!-- Cover  -->
  <!-- Attributes or Schematic Fields  -->
  <!-- Menu  -->

  <!-- Body  -->
  <script type="text/template" id="body_in_set">
    <div class='cover'></div>

    <div class='attributes'>
      <img class='icon' src='/icon/body.svg'>
      <b class='attribute primary'>body of work</b>
    </div>

    <div class='ui'>
      <a class='get' href='#body/<%- _id %>'></a>
      <a class='drag_handle'>&#8597;</a>
    </div>
  </script>

  <!-- Category  -->
  <script type="text/template" id="category_in_set_deprecated">
    <div class='cover'></div>

    <div class='attributes'>
      <img class='icon book' src='/icon/book.svg?<%- Math.random() %>'>
      <b class='title'><%- title %></b>
    </div>

    <div class='ui'>
      <a class='get' href='#category/<%- _id %>'></a>
      <a class='delete'>delete</a>
      <a class='drag_handle'>&#8597;</a>
    </div>
  </script>

  <!-- Work  -->
  <script type="text/template" id="work_in_set_deprecated">

    <div class='cover'></div>

    <div class='attributes'>
      <img class='icon tree' src='/icon/tree.svg'>
      <b class='title'><%- title %></b>
    </div>

    <div class='ui'>
      <a class='get' href='#work/<%- _id %>'></a>
      <a class='delete'>delete</a>
      <a class='drag_handle'>&#8597;</a>
    </div>
  </script>

  <!-- Happening  -->
  <script type="text/template" id="happening_in_set_deprecated">

    <div class='cover'></div>

    <div class='attributes'>
      <a class='get' href='#happening/<%- _id %>'></a>
      <img class='icon calendar' src='/icon/calendar.svg'>
      <b class='title'><%- title %></b>
    </div>

    <div class='ui'>
      <a class='delete'>delete</a>
      <a class='drag_handle'>&#8597;</a>
    </div>
  </script>

  <!-- Photo  -->
  <script type="text/template" id="photo_in_set">

    <!-- no cover -->

    <div class='attributes'>
      <img src="<%- href %>?w=500" alt="" />
      <!--<b class='attribute primary'><%- href %></b>-->
    </div>

    <div class='ui'>
      <a class='get' target='_blank' href='<%- href %>'></a>
      <a class='delete'>delete</a>
      <a class='drag_handle'>&#8597;</a>
    </div>
  </script>

  <!-- Youtube  -->
  <script type="text/template" id="youtube_in_set">

    <div class='cover'>
      <img src='https://img.youtube.com/vi/<%- vid %>/1.jpg'>
      <img src='https://img.youtube.com/vi/<%- vid %>/2.jpg'>
      <img src='https://img.youtube.com/vi/<%- vid %>/3.jpg'>
    </div>

    <div class='attributes'>
      <img class='icon tree' src='/icon/default_icon.svg'>
      <b class='title'>Youtube id <%- vid %></b>
    </div>

    <div class='ui'>
      <a class='get' target='_blank' href='https://www.youtube.com/watch?v=<%- vid %>'></a>
      <a class='delete'>delete</a>
      <a class='drag_handle'>&#8597;</a>
    </div>
  </script>


<!-- left over from progress bar -->
  <script type="text/template" id="batch">
    <div class='in_batch_menu'>
      <i class='batch_count'><%- batch_count %></i>
    </div>
    <div class='batch_items'></div>
  </script>

  <script type="text/template" id="batch_item">
    <div style='width: <%- width %>%' class='progress_bar_fill'></div>
    <a class='cancel'>X</a>
    <i class='label'><%- label %></i>
  </script>


{% endblock %}

{% block content %}
  <div id='predecessor_column'></div>
  <div id='navigation_column'>

    <ul class='account_nav nav'>
      <li class='identification'>
        <a class='drop'>
          <b class='label'>{{current_user.email}}</b>
          <!--<b class='opacity_taper'></b>-->
        </a>
        <ul class='subnav'>
          <li class='account'>
            <a href='{{ url_for('account.account') }}'>
              <b class='icon face'>
                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16"><circle fill="#FFFFFF" stroke="#000000" stroke-miterlimit="10" cx="8" cy="8" r="7.3"/><circle cx="6.5" cy="7.5" r="0.75"/><circle cx="9.5" cy="7.5" r="0.75"/><path fill="none" stroke="#000000" stroke-miterlimit="10" d="M5.5,10.5c0.516,0.625,1.438,1.062,2.5,1.062h0.001H8 c1.062,0,1.984-0.438,2.5-1.062"/></svg>
                </b>
              <b class='label'>account settings</b>
            </a>
          </li>


          {% if current_user.admin %}
            <li class='admin'>
              <a href=" {{ url_for('admin.index') }} ">
                <b class='eye icon'>
                  <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16"><circle fill="#FFFFFF" stroke="#000000" stroke-miterlimit="10" cx="8" cy="8" r="7.3"/><circle cx="6.499" cy="10.5" r="2"/></svg>
                  </b>
                <b class='label'>Admin</b>
              </a>
            </li>
          {% endif %}

          <li class='logout'>
            <a href="{{ url_for('root.logout') }} ">
              <b class='icon'>
                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16"><line fill="none" stroke="#000000" stroke-miterlimit="10" x1="1" y1="1.5" x2="15" y2="1.5"/><line fill="none" stroke="#000000" stroke-miterlimit="10" x1="1" y1="13.5" x2="15" y2="13.5"/><line fill="none" stroke="#000000" stroke-miterlimit="10" x1="0.5" y1="2" x2="0.5" y2="13"/><line fill="none" stroke="#000000" stroke-miterlimit="10" x1="15.5" y1="2" x2="15.5" y2="13"/><line fill="none" stroke="#D80404" stroke-miterlimit="10" x1="2.5" y1="3" x2="2.5" y2="12"/><line fill="none" stroke="#D80404" stroke-miterlimit="10" x1="2" y1="3.5" x2="4" y2="3.5"/><line fill="none" stroke="#D80404" stroke-miterlimit="10" x1="2" y1="7.5" x2="4" y2="7.5"/><line fill="none" stroke="#D80404" stroke-miterlimit="10" x1="2" y1="11.5" x2="4" y2="11.5"/><polygon fill="#D80404" points="8,12 7,12 5,3 6,3 "/><polygon fill="#D80404" points="5,12 6,12 8,3 7,3 "/><line fill="none" stroke="#D80404" stroke-miterlimit="10" x1="9.5" y1="3" x2="9.5" y2="12"/><line fill="none" stroke="#D80404" stroke-miterlimit="10" x1="11" y1="3.5" x2="14" y2="3.5"/><line fill="none" stroke="#D80404" stroke-miterlimit="10" x1="12.5" y1="3.5" x2="12.5" y2="12"/></svg>
                </b>
              <b class='label'>Logout</b>
            </a>
          </li>

        </ul>
      </li>
    </ul>

    <ul class='lime_nav nav'>
      <li class='god'>
        <a>
          <b class='icon god'>
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16"><polyline fill="none" stroke="#000000" points="0.5,1 0.5,15.5 15.5,15.5 15.5,1.5 2.5,1.5 2.5,13.5 13.5,13.5 13.5,3.5 4.5,3.5 4.5,11.5 11.5,11.5 11.5,5.5 6.5,5.5 6.5,9.5 9.5,9.5 9.5,7.5 8,7.5 "/><polyline fill="none" stroke="#fffff" points="1.5,1 1.5,14.5 14.5,14.5 14.5,2.5 3.5,2.5 3.5,12.5 12.5,12.5 12.5,4.5 5.5,4.5 5.5,10.5 10.5,10.5 10.5,6.5 7.5,6.5 7.5,8.5 9,8.5 "/></svg>
          </b>
          <b class='label'>god</b>
        </a>
      </li>
      <li class='home'>
        <a href="{{ url_for('root.index') }}#">
          <b class='icon bookcase'></b>
          <b class='label'>home</b>
        </a>
      </li>
      <li class='back'>
        <a class='' onclick='javascript: history.go(-1)'>
          <b class='icon back'>
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16"><circle fill="#0083c6" cx="8" cy="8" r="8"/><path fill="#ffffff" d="M8,1.018V6l6.697-0.003c0.191,0.637,0.294,1.312,0.294,2.012c0,0.691-0.101,1.36-0.288,1.991H8v5L1,8 L8,1.018z"/></svg>
            </b>
          <b class='label'>back</b>
        </a>

        <ul class='path god'>
        </ul>
      </li>
      <!--
      <li class='vertex body'>
        <a href='/#body'>
          <b class='icon bookcase'></b>
          <b class='label'>body of work</b>
        </a>
      </li>

      <li class='vertex happenings'>
        <a href='/#happenings'>
          <b class='icon calendar'>
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16"><rect y="1" fill="#78F7D8" width="16" height="13"/><rect x="1.5" y="4" fill="#FFFFFF" width="1" height="1"/><rect x="3.5" y="4" fill="#FFFFFF" width="1" height="1"/><rect x="5.5" y="4" fill="#FFFFFF" width="1" height="1"/><rect x="7.5" y="4" fill="#FFFFFF" width="1" height="1"/><rect x="9.5" y="4" fill="#FFFFFF" width="1" height="1"/><rect x="11.5" y="4" fill="#FFFFFF" width="1" height="1"/><rect x="13.5" y="4" fill="#FFFFFF" width="1" height="1"/><rect x="1.5" y="6" fill="#FFFFFF" width="1" height="1"/><rect x="3.5" y="6" fill="#FFFFFF" width="1" height="1"/><rect x="5.5" y="6" fill="#FFFFFF" width="1" height="1"/><rect x="7.5" y="6" fill="#FFFFFF" width="1" height="1"/><rect x="9.5" y="6" fill="#FFFFFF" width="1" height="1"/><rect x="11.5" y="6" fill="#FFFFFF" width="1" height="1"/><rect x="13.5" y="6" fill="#FFFFFF" width="1" height="1"/><rect x="1.5" y="8" fill="#FFFFFF" width="1" height="1"/><rect x="3.5" y="8" fill="#FFFFFF" width="1" height="1"/><rect x="5.5" y="8" fill="#FFFFFF" width="1" height="1"/><rect x="7.5" y="8" fill="#FFFFFF" width="1" height="1"/><rect x="9.5" y="8" fill="#FFFFFF" width="1" height="1"/><rect x="11.5" y="8" fill="#FFFFFF" width="1" height="1"/><rect x="13.5" y="8" fill="#FFFFFF" width="1" height="1"/><rect x="1.5" y="10" fill="#FFFFFF" width="1" height="1"/><rect x="3.5" y="10" fill="#FFFFFF" width="1" height="1"/><rect x="5.5" y="10" fill="#FFFFFF" width="1" height="1"/><rect x="1.5" y="12" fill="#FFFFFF" width="1" height="1"/><rect x="3.5" y="12" fill="#FFFFFF" width="1" height="1"/><rect x="13.5" y="2" fill="#FFFFFF" width="1" height="1"/><rect x="7.5" y="10" fill="#FFFFFF" width="1" height="1"/><rect x="9.5" y="10" fill="#FFFFFF" width="1" height="1"/><rect x="11.5" y="10" fill="#FFFFFF" width="1" height="1"/><rect x="13.5" y="10" fill="#FFFFFF" width="1" height="1"/></svg>
          </b>
          <b class='label'>happenings</b>
        </a>
      </li>
    -->

    </ul>

    <!--
    <ul class='graph_nav nav'>

    </ul>
    -->

    <div id='path_panel'></div>




  </div>
  <div id='display_column'>
    <div id='listing_panel'></div>
    <div id='action_panel'></div>
    <div id='request_panel'>
      <div class='container'></div>
    </div>
  </div>
  <div id='storage_column'>
    <!-- for future use -->
  </div>

{% endblock %}

{% block js_footer %}

  <script type="text/javascript" src='{{ url_for('static', filename='js/s3upload.js') }}'></script>
  <script type="text/javascript" src='{{ url_for('static', filename='js/lime.model.js') }}'></script>
  <script type="text/javascript" src='{{ url_for('static', filename='js/lime.collection.js') }}'></script>
  <script type="text/javascript" src='{{ url_for('static', filename='js/lime.panel.js') }}'></script>
  <script type="text/javascript" src='{{ url_for('static', filename='js/lime.view.js') }}'></script>
  <script type="text/javascript" src='{{ url_for('static', filename='js/lime.form.js') }}'></script>
  <script type="text/javascript" src='{{ url_for('static', filename='js/lime.path.js') }}'></script>
  <script type="text/javascript" src='{{ url_for('static', filename='js/lime.menu.js') }}'></script>
  <script type="text/javascript" src='{{ url_for('static', filename='js/lime.router.js') }}'></script>
  <script type="text/javascript" src='{{ url_for('static', filename='js/lime.request.js') }}'></script>
  <script type="text/javascript" src='{{ url_for('static', filename='js/lime.requestapi.js') }}'></script>
  <script type='text/javascript'>
    $(document).ready(function() {
      LIME.subnav('.nav a.drop');
      LIME.flash();
      LIME.start();
    });
  </script>

{% endblock %}
